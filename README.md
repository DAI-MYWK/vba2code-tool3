# ホットスタッフ対象案件抽出ツール

Excel ベースの求人案件掲載可否判定ツールを Web アプリケーション化したものです。

## 機能

- CSV ファイルアップロード（最大 30,000 件）
- 掲載可否の自動判定
- 非掲載理由の自動生成
- 最低賃金チェック（都道府県別）
- 企業名チェック（有料職業紹介案件）
- NG ワード検出
- テキストクリーニング（テンプレート文言一括除去）
- クリーニング済み CSV エクスポート
- マスタデータ管理（掲載店舗、最低賃金、抜きたい文言）

## 技術スタック

- **フレームワーク**: Next.js 16（App Router + Turbopack）
- **データベース**: Neon Postgres
- **ORM**: Drizzle ORM
- **スタイリング**: Tailwind CSS
- **CSV 処理**: PapaParse
- **デプロイ**: Vercel

## セットアップ

### 必要な環境

- Node.js 18 以上
- npm または yarn

### インストール

```bash
# 依存関係のインストール
npm install

# 環境変数の設定
cp .env.example .env
# .envファイルを編集してPOSTGRES_URLを設定

# データベースマイグレーション
npm run db:generate
npm run db:migrate

# マスタデータの投入（db/seed.tsを編集してから実行）
npx tsx db/seed.ts

# 開発サーバーの起動
npm run dev
```

アプリケーションは http://localhost:3000 で起動します。

## プロジェクト構造

```
.
├── app/                    # Next.js App Router
│   ├── admin/             # 管理画面
│   │   ├── stores/        # 掲載店舗管理
│   │   ├── wages/         # 最低賃金管理
│   │   └── phrases/       # 抜きたい文言管理
│   ├── api/               # APIルート
│   │   └── process-csv/   # CSV処理API
│   ├── results/           # 処理結果画面
│   │   └── export/        # エクスポート画面
│   └── page.tsx           # トップページ（CSVアップロード）
├── components/            # Reactコンポーネント
├── db/                    # データベース関連
│   ├── schema.ts          # DBスキーマ定義
│   ├── index.ts           # DB接続
│   ├── seed.ts            # マスタデータ投入スクリプト
│   └── seed-data/         # マスタデータ（JSON）
├── lib/                   # ユーティリティ
│   ├── types.ts           # 型定義
│   └── processor.ts       # コア処理ロジック
├── docs/                  # ドキュメント
├── DEPLOY.md              # デプロイガイド
└── README.md              # このファイル
```

## 使い方

### 1. CSV アップロード

トップページから CSV ファイル（57 列）をアップロードします。

### 2. 処理実行

「処理を開始」ボタンをクリックすると、以下の処理が自動実行されます:

- 掲載可否判定
- 最低賃金チェック
- 企業名チェック
- NG ワード検出
- テキストクリーニング
- 非掲載理由生成

### 3. 結果確認

処理結果画面で以下を確認できます:

- 総件数、掲載可能件数、非掲載件数
- 非掲載案件一覧と理由
- NG ワード検出結果

### 4. エクスポート

3 種類の CSV をダウンロードできます:

- 派遣案件（TS/PS/TP/PL/SL）
- 直雇用案件
- 有料職業紹介確認用（PL/SL）

### 5. マスタ管理

管理画面から以下のマスタデータを管理できます:

- 掲載店舗（126 件）
- 最低賃金（47 都道府県）
- 抜きたい文言（1,130 件）
- 非掲載フラグ文言
- 年齢制限 NG 文言
- NG ワード

## デプロイ

詳細は [DEPLOY.md](./DEPLOY.md) を参照してください。

```bash
# Vercelへのデプロイ
vercel --prod
```

## ライセンス

ISC

## 注意事項

- CSV ファイルは最大 30,000 件まで対応
- Vercel Hobby プラン（無料）では処理時間 10 秒まで
- 大量データ処理には Pro プラン（月$20）を推奨
- 管理画面には認証機能がないため、本番環境では追加実装を推奨
